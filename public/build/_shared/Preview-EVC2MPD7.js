import{a as y,b as D,c as be,d as ye,e as _e,f as P,g as ve,h as xe,i as Ae}from"/build/_shared/chunk-PBIW27CB.js";import{a as X,b as C}from"/build/_shared/chunk-YZEJYO2E.js";import{c as b,d as ge}from"/build/_shared/chunk-W5DRAD4K.js";var m=b(X(),1);var Ee=b(X(),1);function F(...t){let e="";for(let r of t)e=Pe(e,Je(r));return e}function Je(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return F(...t);let e="";for(let r in t)t[r]&&(e=Pe(e,r));return e}function Pe(t,e){return e?t?t+" "+e:t+e:t}var Q=b(C(),1),M=(0,Ee.memo)(({icon:t,size:e="xl",className:r,iconClassName:n,disabledClassName:o,disabled:i=!1,title:a,onClick:c,children:s})=>(0,Q.jsx)("button",{className:F("flex items-center text-gobezeai-elements-item-contentDefault bg-transparent enabled:hover:text-gobezeai-elements-item-contentActive rounded-md p-1 enabled:hover:bg-gobezeai-elements-item-backgroundActive disabled:cursor-not-allowed",{[F("opacity-30",o)]:i},r),title:a,disabled:i,onClick:l=>{i||c?.(l)},children:s||(0,Q.jsx)("div",{className:F(t,qe(e),n)})}));function qe(t){return t==="sm"?"text-sm":t==="md"?"text-md":t==="lg"?"text-lg":t==="xl"?"text-xl":"text-2xl"}var N=_e("ActionRunner"),U=class{#t;#e=Promise.resolve();actions=D({});constructor(e){this.#t=e}addAction(e){let{actionId:r}=e;if(this.actions.get()[r])return;let i=new AbortController;this.actions.setKey(r,{...e.action,status:"pending",executed:!1,abort:()=>{i.abort(),this.#i(r,{status:"aborted"})},abortSignal:i.signal}),this.#e.then(()=>{this.#i(r,{status:"running"})})}async runAction(e){let{actionId:r}=e,n=this.actions.get()[r];n||P(`Action ${r} not found`),!n.executed&&(this.#i(r,{...n,...e.action,executed:!0}),this.#e=this.#e.then(()=>this.#r(r)).catch(o=>{console.error("Action failed:",o)}))}async#r(e){let r=this.actions.get()[e];this.#i(e,{status:"running"});try{switch(r.type){case"shell":{await this.#o(r);break}case"file":{await this.#n(r);break}}this.#i(e,{status:r.abortSignal.aborted?"aborted":"complete"})}catch(n){throw this.#i(e,{status:"failed",error:"Action failed"}),n}}async#o(e){e.type!=="shell"&&P("Expected shell action");let n=await(await this.#t).spawn("jsh",["-c",e.content],{env:{npm_config_yes:!0}});e.abortSignal.addEventListener("abort",()=>{n.kill()}),n.output.pipeTo(new WritableStream({write(i){console.log(i)}}));let o=await n.exit;N.debug(`Process terminated with code ${o}`)}async#n(e){e.type!=="file"&&P("Expected file action");let r=await this.#t,n=ve(e.filePath);if(n=n.replace(/\/+$/g,""),n!==".")try{await r.fs.mkdir(n,{recursive:!0}),N.debug("Created folder",n)}catch(o){N.error(`Failed to create folder

`,o)}try{await r.fs.writeFile(e.filePath,e.content),N.debug(`File written ${e.filePath}`)}catch(o){N.error(`Failed to write file

`,o)}}#i(e,r){let n=this.actions.get();this.actions.setKey(e,{...n[e],...r})}};var Se="https://stackblitz.com";var E=class{_bus=new EventTarget;listen(e){function r(n){e(n.data)}return this._bus.addEventListener("message",r),()=>this._bus.removeEventListener("message",r)}fireEvent(e){this._bus.dispatchEvent(new MessageEvent("message",{data:e}))}};var Ye=new Error;Ye.stack="";var Xe=new E;function Ce(t){return Xe.listen(t)}var Z={},W=null,z={get editorOrigin(){return W==null&&(W=new URL(globalThis.WEBCONTAINER_API_IFRAME_URL??Se).origin),W},set editorOrigin(t){W=new URL(t).origin},setQueryParam(t,e){Z[t]=e},get url(){let t=new URL(this.editorOrigin);t.pathname="/headless";for(let e in Z)t.searchParams.set(e,Z[e]);return t.searchParams.set("version","1.5.1-internal.7"),t}};function ke(){let t,e;function r(){e=new Promise(n=>t=n)}return r(),{get promise(){return e},resolve(n){return t(n)},reset:r}}var _={initialized:!1,bootCalled:!1,authComplete:ke(),clientId:"",oauthScope:"",broadcastChannel:null,get editorOrigin(){return z.editorOrigin},tokens:null},Xt=new E,Qt=new E;function Re(t){if(!t)throw new Error("Oops! Tokens is not defined when it always should be.")}var v;(function(t){t.UncaughtException="PREVIEW_UNCAUGHT_EXCEPTION",t.UnhandledRejection="PREVIEW_UNHANDLED_REJECTION",t.ConsoleError="PREVIEW_CONSOLE_ERROR"})(v||(v={}));var Qe=Object.defineProperty,Ze=(t,e)=>{for(var r in e)Qe(t,r,{get:e[r],enumerable:!0})},p={};Ze(p,{createEndpoint:()=>Ie,expose:()=>oe,proxy:()=>Ue,proxyMarker:()=>re,releaseProxy:()=>Oe,transfer:()=>Me,transferHandlers:()=>ne,windowEndpoint:()=>ot,wrap:()=>Ne});var re=Symbol("Comlink.proxy"),Ie=Symbol("Comlink.endpoint"),Oe=Symbol("Comlink.releaseProxy"),ee=Symbol("Comlink.thrown"),Le=t=>typeof t=="object"&&t!==null||typeof t=="function",et={canHandle:t=>Le(t)&&t[re],serialize(t){let{port1:e,port2:r}=new MessageChannel;return oe(t,e),[r,[r]]},deserialize(t){return t.start(),Ne(t)}},tt={canHandle:t=>Le(t)&&ee in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},ne=new Map([["proxy",et],["throw",tt]]);function oe(t,e=self){e.addEventListener("message",function r(n){if(!n||!n.data)return;let{id:o,type:i,path:a}=Object.assign({path:[]},n.data),c=(n.data.argumentList||[]).map(S),s;try{let l=a.slice(0,-1).reduce((f,w)=>f[w],t),u=a.reduce((f,w)=>f[w],t);switch(i){case 0:s=u;break;case 1:l[a.slice(-1)[0]]=S(n.data.value),s=!0;break;case 2:s=u.apply(l,c);break;case 3:{let f=new u(...c);s=Ue(f)}break;case 4:{let{port1:f,port2:w}=new MessageChannel;oe(t,w),s=Me(f,[f])}break;case 5:s=void 0;break}}catch(l){s={value:l,[ee]:0}}Promise.resolve(s).catch(l=>({value:l,[ee]:0})).then(l=>{let[u,f]=ie(l);e.postMessage(Object.assign(Object.assign({},u),{id:o}),f),i===5&&(e.removeEventListener("message",r),Fe(e))})}),e.start&&e.start()}function rt(t){return t.constructor.name==="MessagePort"}function Fe(t){rt(t)&&t.close()}function Ne(t,e){return te(t,[],e)}function B(t){if(t)throw new Error("Proxy has been released and is not useable")}function te(t,e=[],r=function(){}){let n=!1,o=new Proxy(r,{get(i,a){if(B(n),a===Oe)return()=>k(t,{type:5,path:e.map(c=>c.toString())}).then(()=>{Fe(t),n=!0});if(a==="then"){if(e.length===0)return{then:()=>o};let c=k(t,{type:0,path:e.map(s=>s.toString())}).then(S);return c.then.bind(c)}return te(t,[...e,a])},set(i,a,c){B(n);let[s,l]=ie(c);return k(t,{type:1,path:[...e,a].map(u=>u.toString()),value:s},l).then(S)},apply(i,a,c){B(n);let s=e[e.length-1];if(s===Ie)return k(t,{type:4}).then(S);if(s==="bind")return te(t,e.slice(0,-1));let[l,u]=Te(c);return k(t,{type:2,path:e.map(f=>f.toString()),argumentList:l},u).then(S)},construct(i,a){B(n);let[c,s]=Te(a);return k(t,{type:3,path:e.map(l=>l.toString()),argumentList:c},s).then(S)}});return o}function nt(t){return Array.prototype.concat.apply([],t)}function Te(t){let e=t.map(ie);return[e.map(r=>r[0]),nt(e.map(r=>r[1]))]}var De=new WeakMap;function Me(t,e){return De.set(t,e),t}function Ue(t){return Object.assign(t,{[re]:!0})}function ot(t,e=self,r="*"){return{postMessage:(n,o)=>t.postMessage(n,r,o),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function ie(t){for(let[e,r]of ne)if(r.canHandle(t)){let[n,o]=r.serialize(t);return[{type:3,name:e,value:n},o]}return[{type:0,value:t},De.get(t)||[]]}function S(t){switch(t.type){case 3:return ne.get(t.name).deserialize(t.value);case 0:return t.value}}function k(t,e,r){return new Promise(n=>{let o=it();t.addEventListener("message",function i(a){!a.data||!a.data.id||a.data.id!==o||(t.removeEventListener("message",i),n(a.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),r)})}function it(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var st=[v.ConsoleError,v.UncaughtException,v.UnhandledRejection];function se(t){return!(t==null||typeof t!="object"||!("type"in t)||!st.includes(t.type))}function x(t){let e=Object.create(null);return t?Object.assign(e,t):e}function H(t){let e={d:{}};for(let r of Object.keys(t)){let n=t[r];if("file"in n){if("symlink"in n.file){e.d[r]={f:{l:n.file.symlink}};continue}let i=n.file.contents,a=typeof i=="string"?i:at(i),c=typeof i=="string"?{}:{b:!0};e.d[r]={f:{c:a,...c}};continue}let o=H(n.directory);e.d[r]=o}return e}function V(t){let e=x();if("f"in t)throw new Error("It is not possible to export a single file in the JSON format.");if("d"in t)for(let r of Object.keys(t.d)){let n=t.d[r];"d"in n?e[r]=x({directory:V(n)}):"f"in n&&("c"in n.f?e[r]=x({file:x({contents:n.f.c})}):"l"in n.f&&(e[r]=x({file:x({symlink:n.f.l})})))}return e}function at(t){let e="";for(let r of t)e+=String.fromCharCode(r);return e}var j=null,$=null,ae={},We=new TextDecoder,ct=new TextEncoder,R=class{_instance;_runtimeInfo;fs;internal;_tornDown=!1;_unsubscribeFromTokenChangedListener=()=>{};constructor(e,r,n){this._instance=e,this._runtimeInfo=n,this.fs=new pe(r),this.internal=new ue(e),_.initialized&&(this._unsubscribeFromTokenChangedListener=Ce(o=>{this._instance.setCredentials({accessToken:o,editorOrigin:_.editorOrigin})}),(async()=>{await _.authComplete.promise,!this._tornDown&&(Re(_.tokens),await this._instance.setCredentials({accessToken:_.tokens.access,editorOrigin:_.editorOrigin}))})().catch(o=>{console.error(o)}))}async spawn(e,r,n){let o=[];Array.isArray(r)?o=r:n=r;let i,a=new ReadableStream;if(n?.output!==!1){let g=le();i=g.push,a=g.stream}let c,s,l,u;if(s=new ReadableStream,u=new ReadableStream,n?.stdout){let g=le();c=g.push,s=g.stream}if(n?.stderr){let g=le();l=g.push,u=g.stream}let f=G(ce(i)),w=G(ce(c)),q=G(ce(l)),Y=await this._instance.run({command:e,args:o,cwd:n?.cwd,env:n?.env,terminal:n?.terminal},w,q,f);return new me(Y,a,s,u)}async export(e,r){let n={format:r?.format??"json",includes:r?.includes,excludes:r?.excludes,external:!0},o=await this._instance.serialize(e,n);if(n.format==="json"){let i=JSON.parse(We.decode(o));return V(i)}return o}on(e,r){if(e==="preview-message"){let i=r;r=a=>{se(a)&&i(a)}}let{listener:n,subscribe:o}=he(r);return o(this._instance.on(e,p.proxy(n)))}mount(e,r){let n=e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):ct.encode(JSON.stringify(H(e)));return this._instance.loadFiles(p.transfer(n,[n.buffer]),{mountPoints:r?.mountPoint})}setPreviewScript(e,r){return this._instance.setPreviewScript(e,r)}get path(){return this._runtimeInfo.path}get workdir(){return this._runtimeInfo.cwd}teardown(){if(this._tornDown)throw new Error("WebContainer already torn down");this._tornDown=!0,this._unsubscribeFromTokenChangedListener(),this.fs._teardown(),this._instance.teardown(),this._instance[p.releaseProxy](),R._instance===this&&(R._instance=null)}static async boot(e={}){let{workdirName:r}=e;if(window.crossOriginIsolated&&e.coep==="none"&&console.warn(`A Cross-Origin-Embedder-Policy header is required in cross origin isolated environments.
Set the 'coep' option to 'require-corp'.`),r?.includes("/")||r===".."||r===".")throw new Error("workdirName should be a valid folder name");for(_.bootCalled=!0;j;)await j;if(R._instance)throw new Error("Only a single WebContainer instance can be booted");let n=ft(e);j=n.catch(()=>{});try{let o=await n;return R._instance=o,o}finally{j=null}}},T=R;ge(T,"_instance",null);var ue=class{_instance;constructor(e){this._instance=e}watchPaths(e,r){let{listener:n,subscribe:o}=he(r);return o(this._instance.watchPaths(e,p.proxy(n)))}getProcesses(){return this._instance.getProcesses()}onProcessesRemove(e){let{listener:r,subscribe:n}=he(e);return n(this._instance.onProcessesRemove(p.proxy(r)))}serialize(e,r){return this._instance.serialize(e,r)}setCORSProxy(e){return this._instance.setCORSProxy(e)}setCORSAuthToken(e){return this._instance.setCORSAuthToken(e)}},lt=1,ut=2,fe=class{name;_type;constructor(e,r){this.name=e,this._type=r}isFile(){return this._type===lt}isDirectory(){return this._type===ut}},de=class{_apiClient;_path;_options;_listener;_wrappedListener;_watcher;_closed=!1;constructor(e,r,n,o){this._apiClient=e,this._path=r,this._options=n,this._listener=o,this._apiClient._watchers.add(this),this._wrappedListener=(i,a)=>{this._listener&&!this._closed&&this._listener(i,a)},this._apiClient._fs.watch(this._path,this._options,G(this._wrappedListener)).then(i=>{this._watcher=i,this._closed&&this._teardown()}).catch(console.error)}close(){this._closed||(this._closed=!0,this._apiClient._watchers.delete(this),this._teardown())}_teardown(){this._watcher?.close().finally(()=>{this._watcher?.[p.releaseProxy]()})}},me=class{output;input;exit;_process;stdout;stderr;constructor(e,r,n,o){this.output=r,this._process=e,this.input=new WritableStream({write:i=>{this._getProcess()?.write(i).catch(()=>{})}}),this.exit=this._onExit(),this.stdout=n,this.stderr=o}kill(){this._getProcess()?.kill()}resize(e){this._getProcess()?.resize(e)}async _onExit(){try{return await this._process.onExit}finally{this._process?.[p.releaseProxy](),this._process=null}}_getProcess(){return this._process==null&&console.warn("This process already exited"),this._process}},pe=class{_fs;_watchers=new Set([]);constructor(e){this._fs=e}rm(...e){return this._fs.rm(...e)}async readFile(e,r){return await this._fs.readFile(e,r)}async rename(e,r){return await this._fs.rename(e,r)}async writeFile(e,r,n){if(r instanceof Uint8Array){let o=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength);r=p.transfer(new Uint8Array(o),[o])}await this._fs.writeFile(e,r,n)}async readdir(e,r){let n=await this._fs.readdir(e,r);return mt(n)||pt(n)?n:n.map(i=>new fe(i.name,i["Symbol(type)"]))}async mkdir(e,r){return await this._fs.mkdir(e,r)}watch(e,r,n){return typeof r=="function"&&(n=r,r=null),new de(this,e,r,n)}_teardown(){this._fs[p.releaseProxy]();for(let e of this._watchers)e.close()}};async function ft(t){let{serverPromise:e}=dt(t),n=await(await e).build({host:window.location.host,version:"1.5.1-internal.7",workdirName:t.workdirName,forwardPreviewErrors:t.forwardPreviewErrors}),o=await n.fs(),i=await n.runtimeInfo();return new T(n,o,i)}function ce(t){if(t!=null)return e=>{e instanceof Uint8Array?t(We.decode(e)):e==null&&t(null)}}function G(t){if(t!=null)return p.proxy(t)}function dt(t){if($!=null)return t.coep!==ae.coep&&(console.warn(`Attempting to boot WebContainer with 'coep: ${t.coep}'`),console.warn(`First boot had 'coep: ${ae.coep}', new settings will not take effect!`)),{serverPromise:$};let e=document.createElement("iframe");e.style.display="none",e.setAttribute("allow","cross-origin-isolated");let r=z.url;t.coep&&r.searchParams.set("coep",t.coep),e.src=r.toString();let{origin:n}=r;return ae={...t},$=new Promise(o=>{let i=a=>{if(a.origin!==n)return;let{data:c}=a;if(c.type==="init"){o(p.wrap(a.ports[0]));return}if(c.type==="warning"){console[c.level].call(console,c.message);return}};window.addEventListener("message",i)}),document.body.insertBefore(e,null),{serverPromise:$}}function mt(t){return typeof t[0]=="string"}function pt(t){return t[0]instanceof Uint8Array}function le(){let t=null;return{stream:new ReadableStream({start(n){t=n}}),push:n=>{n!=null?t?.enqueue(n):(t?.close(),t=null)}}}function he(t){let e=!1,r=()=>{};return{subscribe(o){return o.then(i=>{r=i,e&&r()}),()=>{e=!0,r()}},listener:(...o)=>{e||t(...o)}}}var ht={loaded:!1},I=new Promise(()=>{});import.meta.env.SSR||(I=Promise.resolve().then(()=>T.boot({workdirName:ye})).then(t=>(ht.loaded=!0,t)));var K=class{#t=new Map;#e;previews=y([]);constructor(e){this.#e=e,this.#r()}async#r(){(await this.#e).on("port",(r,n,o)=>{let i=this.#t.get(r);if(n==="close"&&i){this.#t.delete(r),this.previews.set(this.previews.get().filter(c=>c.port!==r));return}let a=this.previews.get();i||(i={port:r,ready:n==="open",baseUrl:o},this.#t.set(r,i),a.push(i)),i.ready=n==="open",i.baseUrl=o,this.previews.set([...a])})}};function ze(){if(typeof Promise.withResolvers=="function")return Promise.withResolvers();let t,e,r=new Promise((n,o)=>{t=n,e=o});return{resolve:t,reject:e,promise:r}}async function Be(t,e){let r=[],n=await t.spawn("/bin/jsh",["--osc",...r],{terminal:{cols:e.cols??80,rows:e.rows??15}}),o=n.input.getWriter(),i=n.output,a=ze(),c=!1;return i.pipeTo(new WritableStream({write(s){if(!c){let[,l]=s.match(/\x1b\]654;([^\x07]+)\x07/)||[];l==="interactive"&&(c=!0,a.resolve())}e.write(s)}})),e.onData(s=>{c&&o.write(s)}),await a.promise,n}var He="\x1B[0m",wt={reset:He,clear:"\x1B[g",red:"\x1B[1;31m"},Ve={red:t=>`${wt.red}${t}${He}`};var J=class{#t;#e=[];showTerminal=y(!1);constructor(e){this.#t=e}toggleTerminal(e){this.showTerminal.set(e!==void 0?e:!this.showTerminal.get())}async attachTerminal(e){try{let r=await Be(await this.#t,e);this.#e.push({terminal:e,process:r})}catch(r){e.write(Ve.red(`Failed to spawn shell

`)+r.message);return}}onTerminalResize(e,r){for(let{process:n}of this.#e)n.resize({cols:e,rows:r})}};var we=class{#t=new K(I);#e=new xe(I);#r=new Ae(this.#e);#o=new J(I);artifacts=D({});showWorkbench=y(!1);currentView=y("code");unsavedFiles=y(new Set);modifiedFiles=new Set;artifactIdList=[];constructor(){}get previews(){return this.#t.previews}get files(){return this.#e.files}get currentDocument(){return this.#r.currentDocument}get selectedFile(){return this.#r.selectedFile}get firstArtifact(){return this.#n(this.artifactIdList[0])}get filesCount(){return this.#e.filesCount}get showTerminal(){return this.#o.showTerminal}toggleTerminal(e){this.#o.toggleTerminal(e)}attachTerminal(e){this.#o.attachTerminal(e)}onTerminalResize(e,r){this.#o.onTerminalResize(e,r)}setDocuments(e){if(this.#r.setDocuments(e),this.#e.filesCount>0&&this.currentDocument.get()===void 0){for(let[r,n]of Object.entries(e))if(n?.type==="file"){this.setSelectedFile(r);break}}}setShowWorkbench(e){this.showWorkbench.set(e)}setCurrentDocumentContent(e){let r=this.currentDocument.get()?.filePath;if(!r)return;let n=this.#e.getFile(r)?.content,o=n!==void 0&&n!==e;this.#r.updateFile(r,e);let i=this.currentDocument.get();if(i){let a=this.unsavedFiles.get();if(o&&a.has(i.filePath))return;let c=new Set(a);o?c.add(i.filePath):c.delete(i.filePath),this.unsavedFiles.set(c)}}setCurrentDocumentScrollPosition(e){let r=this.currentDocument.get();if(!r)return;let{filePath:n}=r;this.#r.updateScrollPosition(n,e)}setSelectedFile(e){this.#r.setSelectedFile(e)}async saveFile(e){let n=this.#r.documents.get()[e];if(n===void 0)return;await this.#e.saveFile(e,n.value);let o=new Set(this.unsavedFiles.get());o.delete(e),this.unsavedFiles.set(o)}async saveCurrentDocument(){let e=this.currentDocument.get();e!==void 0&&await this.saveFile(e.filePath)}resetCurrentDocument(){let e=this.currentDocument.get();if(e===void 0)return;let{filePath:r}=e,n=this.#e.getFile(r);n&&this.setCurrentDocumentContent(n.content)}async saveAllFiles(){for(let e of this.unsavedFiles.get())await this.saveFile(e)}getFileModifcations(){return this.#e.getFileModifications()}resetAllFileModifications(){this.#e.resetFileModifications()}abortAllActions(){}addArtifact({messageId:e,title:r,id:n}){this.#n(e)||(this.artifactIdList.includes(e)||this.artifactIdList.push(e),this.artifacts.setKey(e,{id:n,title:r,closed:!1,runner:new U(I)}))}updateArtifact({messageId:e},r){let n=this.#n(e);n&&this.artifacts.setKey(e,{...n,...r})}async addAction(e){let{messageId:r}=e,n=this.#n(r);n||P("Artifact not found"),n.runner.addAction(e)}async runAction(e){let{messageId:r}=e,n=this.#n(r);n||P("Artifact not found"),n.runner.runAction(e)}#n(e){return this.artifacts.get()[e]}},je=new we;var O=b(X(),1);var A=b(C(),1),$e=(0,O.memo)(({activePreviewIndex:t,setActivePreviewIndex:e,isDropdownOpen:r,setIsDropdownOpen:n,setHasSelectedPreview:o,previews:i})=>{let a=(0,O.useRef)(null),c=i.map((s,l)=>({...s,index:l})).sort((s,l)=>s.port-l.port);return(0,O.useEffect)(()=>{let s=l=>{a.current&&!a.current.contains(l.target)&&n(!1)};return r?window.addEventListener("mousedown",s):window.removeEventListener("mousedown",s),()=>{window.removeEventListener("mousedown",s)}},[r]),(0,A.jsxs)("div",{className:"relative z-port-dropdown",ref:a,children:[(0,A.jsx)(M,{icon:"i-ph:plug",onClick:()=>n(!r)}),r&&(0,A.jsxs)("div",{className:"absolute right-0 mt-2 bg-gobezeai-elements-background-depth-2 border border-gobezeai-elements-borderColor rounded shadow-sm min-w-[140px] dropdown-animation",children:[(0,A.jsx)("div",{className:"px-4 py-2 border-b border-gobezeai-elements-borderColor text-sm font-semibold text-gobezeai-elements-textPrimary",children:"Ports"}),c.map(s=>(0,A.jsx)("div",{className:"flex items-center px-4 py-2 cursor-pointer hover:bg-gobezeai-elements-item-backgroundActive",onClick:()=>{e(s.index),n(!1),o(!0)},children:(0,A.jsx)("span",{className:t===s.index?"text-gobezeai-elements-item-contentAccent":"text-gobezeai-elements-item-contentDefault group-hover:text-gobezeai-elements-item-contentActive",children:s.port})},s.port))]})]})});var h=b(C(),1),en=(0,m.memo)(()=>{let t=(0,m.useRef)(null),e=(0,m.useRef)(null),[r,n]=(0,m.useState)(0),[o,i]=(0,m.useState)(!1),a=(0,m.useRef)(!1),c=be(je.previews),s=c[r],[l,u]=(0,m.useState)(""),[f,w]=(0,m.useState)();(0,m.useEffect)(()=>{if(!s){u(""),w(void 0);return}let{baseUrl:d}=s;u(d),w(d)},[s,f]);let q=(0,m.useCallback)(d=>{if(!s)return!1;let{baseUrl:L}=s;return d===L?!0:d.startsWith(L)?["/","?","#"].includes(d.charAt(L.length)):!1},[s]),Y=(0,m.useCallback)((d,L,Ge,Ke)=>L.port<Ke[d].port?Ge:d,[]);return(0,m.useEffect)(()=>{if(c.length>1&&!a.current){let d=c.reduce(Y,0);n(d)}},[c]),(0,h.jsxs)("div",{className:"w-full h-full flex flex-col",children:[o&&(0,h.jsx)("div",{className:"z-iframe-overlay w-full h-full absolute",onClick:()=>i(!1)}),(0,h.jsxs)("div",{className:"bg-gobezeai-elements-background-depth-2 p-2 flex items-center gap-1.5",children:[(0,h.jsx)(M,{icon:"i-ph:arrow-clockwise",onClick:()=>{t.current&&(t.current.src=t.current.src)}}),(0,h.jsx)("div",{className:`flex items-center gap-1 flex-grow bg-gobezeai-elements-preview-addressBar-background border border-gobezeai-elements-borderColor text-gobezeai-elements-preview-addressBar-text rounded-full px-3 py-1 text-sm hover:bg-gobezeai-elements-preview-addressBar-backgroundHover hover:focus-within:bg-gobezeai-elements-preview-addressBar-backgroundActive focus-within:bg-gobezeai-elements-preview-addressBar-backgroundActive
        focus-within-border-gobezeai-elements-borderColorActive focus-within:text-gobezeai-elements-preview-addressBar-textActive`,children:(0,h.jsx)("input",{ref:e,className:"w-full bg-transparent outline-none",type:"text",value:l,onChange:d=>{u(d.target.value)},onKeyDown:d=>{d.key==="Enter"&&q(l)&&(w(l),e.current&&e.current.blur())}})}),c.length>1&&(0,h.jsx)($e,{activePreviewIndex:r,setActivePreviewIndex:n,isDropdownOpen:o,setHasSelectedPreview:d=>a.current=d,setIsDropdownOpen:i,previews:c})]}),(0,h.jsx)("div",{className:"flex-1 border-t border-gobezeai-elements-borderColor",children:s?(0,h.jsx)("iframe",{ref:t,className:"border-none w-full h-full bg-white",src:f}):(0,h.jsx)("div",{className:"flex w-full h-full justify-center items-center bg-white",children:"No preview available"})})]})});export{en as Preview};
